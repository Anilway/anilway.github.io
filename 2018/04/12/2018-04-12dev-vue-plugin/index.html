<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.0 -->
    <script>
        window.materialVersion = "1.5.0"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Title -->
    
    <title>
        
            编写vue插件 | 
        
        Anilway
    </title>

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Anilway">
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content=",JavaScript,vue,vue-plugin">

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(window.oldVersion){var remove=window.oldVersion.reduce(function(p,c){return p||data.indexOf("/*"+c+"*/")!==-1},false);if(remove){lsloader.removeLS(key)}}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload,isJs){if(typeof cssonload==="boolean"){isJs=cssonload;cssonload=undefined}isJs=isJs||false;cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload,isJs);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload,isJs);return}code=code.split(versionString)[1];if(isJs){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload,isJs)}};lsloader.requestResource=function(name,path,cssonload,isJs){var that=this;if(isJs){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else{this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon1.png">
    <link rel="icon" sizes="192x192" href="/img/favicon1.png">
    <link rel="apple-touch-icon" href="/img/favicon1.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Anilway">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #222 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #222 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #222 !important;
  }

  .toTop {
    background: #222 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #222;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #222;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #222;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icon -->

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?ezyEvm8ST5CGfpA+kFFi1g==", true)</script>
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="编写vue插件 | Anilway">
    <meta property="og:image" content="http://yoursite.com/img/favicon1.png" />
    <meta property="og:description" content="">
    <meta property="og:article:tag" content="JavaScript"> <meta property="og:article:tag" content="vue"> <meta property="og:article:tag" content="vue-plugin"> 

    
        <meta property="article:published_time" content="Thu Apr 12 2018 00:00:00 GMT+0800" />
        <meta property="article:modified_time" content="Wed Oct 10 2018 12:49:51 GMT+0800" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="编写vue插件 | Anilway">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="http://yoursite.com/img/favicon1.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="http://yoursite.com" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/index.html",
    "headline": "编写vue插件",
    "datePublished": "Thu Apr 12 2018 00:00:00 GMT+0800",
    "dateModified": "Wed Oct 10 2018 12:49:51 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Anilway",
        "image": {
            "@type": "ImageObject",
            "url": "/img/touxiang.jpg"
        },
        "description": "Make yourself better!"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Anilway",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon1.png"
        }
    },
    "keywords": ",JavaScript,vue,vue-plugin",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1、vue配置"><span class="post-toc-text">1、vue配置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#注意点："><span class="post-toc-text">注意点：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#感悟："><span class="post-toc-text">感悟：</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2、将router独立出来"><span class="post-toc-text">2、将router独立出来</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3、编写一个简单的vue插件"><span class="post-toc-text">3、编写一个简单的vue插件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#官方文档介绍"><span class="post-toc-text">官方文档介绍</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开发插件"><span class="post-toc-text">开发插件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#使用插件"><span class="post-toc-text">使用插件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#基本代码模式"><span class="post-toc-text">基本代码模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#插件组件编写"><span class="post-toc-text">插件组件编写</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#调用插件"><span class="post-toc-text">调用插件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Vue-extend源代码"><span class="post-toc-text">Vue.extend源代码</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Vue-extend-options"><span class="post-toc-text">Vue.extend( options )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#使用组件"><span class="post-toc-text">使用组件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4、Vue-js-插件开发详解"><span class="post-toc-text">4、Vue.js 插件开发详解</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#认识插件"><span class="post-toc-text">认识插件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开发-vue-toast"><span class="post-toc-text">开发 vue-toast</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#源码地址：vue-toast"><span class="post-toc-text">源码地址：vue-toast</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#更多文章：blog"><span class="post-toc-text">更多文章：blog</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5、Vue插件开发入门"><span class="post-toc-text">5、Vue插件开发入门</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1、vue-touch"><span class="post-toc-text">1、vue-touch</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2、vue-router"><span class="post-toc-text">2、vue-router</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3、vue-resource"><span class="post-toc-text">3、vue-resource</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6、vue插件开发与发布"><span class="post-toc-text">6、vue插件开发与发布</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7、vue插件编写的个人理解"><span class="post-toc-text">7、vue插件编写的个人理解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#插件接收方式"><span class="post-toc-text">插件接收方式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#插件需要注册"><span class="post-toc-text">插件需要注册</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#插件的参数"><span class="post-toc-text">插件的参数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Vue-use-plugin"><span class="post-toc-text">Vue.use( plugin )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实际编写插件"><span class="post-toc-text">实际编写插件</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(https://raw.githubusercontent.com/Anilway/blogImg/master/common%20cover/vue-cover.jpeg)">
    
            <p class="article-headline-p">
                编写vue插件
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/touxiang.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Anilway</strong>
        <span>4月 12, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="https://pan.baidu.com/share/qrcode?w=246&h=246&url=http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/JavaScript/">JavaScript</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/vue/">vue</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/vue-plugin/">vue-plugin</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=编写vue插件&url=http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/index.html&pic=http://yoursite.com/img/favicon1.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=编写vue插件&url=http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/index.html&via=Anilway" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <script src="\assets\js\APlayer.min.js"> </script><h2 id="1、vue配置"><a href="#1、vue配置" class="headerlink" title="1、vue配置"></a>1、vue配置</h2><p>我们在webpack环境中编写vue项目，需要对vue做一些基本配置。主要是vue组件会单独管理，我们需要引入。</p>
<p><img src="https://raw.githubusercontent.com/Anilway/blogImg/master/2018-04/12/11-01.PNG" alt=""></p>
<p>我们现在来写一个简单的路由页面，看看如何创建组件和引入组件。</p>
<p>当前项目结构如下：</p>
<p><img src="https://raw.githubusercontent.com/Anilway/blogImg/master/2018-04/12/11-02.PNG" alt=""></p>
<p>在src文件夹中只有index.html和main.js。</p>
<p>首先在index.html页面上写一个简单的元素：</p>
<pre><code class="html">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
</code></pre>
<p>然后在main.js中引入Vue：</p>
<pre><code class="javascript">import Vue from &#39;vue&#39;; //import Vue from &#39;vue&#39;; // runtime不支持template,只支持render

new Vue({
    el:&#39;#app&#39;
})
</code></pre>
<p>然后在src文件夹中创建App.vue，创建组件：</p>
<p><img src="https://raw.githubusercontent.com/Anilway/blogImg/master/2018-04/12/11-03.PNG" alt=""></p>
<p>在App.vue中创建总组件：</p>
<pre><code class="vue">&lt;!--App.vue--&gt;
&lt;template&gt;
    &lt;div&gt;{{msg}}&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
        data(){
            return{
                msg:&#39;hello&#39;
            }
        }
    }
&lt;/script&gt;
</code></pre>
<p>然后在main.js中引入App.vue，并将组件注册到vue根实例上：</p>
<pre><code class="javascript">import Vue from &#39;vue&#39;;
import App from &#39;./App.vue&#39;;

new Vue({
    el:&#39;#app&#39;,
    render:h=&gt;h(App)
})
</code></pre>
<p>现在，在当前项目根目录下打开cmd，输入命令<code>npm run dev</code>，开启webpack-dev-server服务，在<a href="http://localhost:8080/可以看到渲染后的页面：" target="_blank" rel="external">http://localhost:8080/可以看到渲染后的页面：</a></p>
<p><img src="https://raw.githubusercontent.com/Anilway/blogImg/master/2018-04/12/11-04.PNG" alt=""></p>
<p>然后我们创建两个组件，Home.vue和List.vue，作为路由转跳页面。因为这些组件都是零碎组件，我们把它们放在components文件夹中存放。项目结构如下：</p>
<p><img src="https://raw.githubusercontent.com/Anilway/blogImg/master/2018-04/12/11-05.PNG" alt=""></p>
<p>然后在Home.vue和List.vue中创建组件：</p>
<pre><code class="vue">&lt;!--Home.vue--&gt;
&lt;template&gt;
    &lt;div&gt;首页&lt;/div&gt;
&lt;/template&gt;

&lt;!--List.vue--&gt;
&lt;template&gt;
    &lt;div&gt;列表页&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<blockquote>
<p>补充：</p>
<p>还记得前面安装了<code>vue-template-compiler</code>，就是用来解析组件中的<code>&lt;template&gt;</code>的。</p>
</blockquote>
<p>然后在main.js中引入路由和上面两个组件，并创建路由列表，在根实例上注册路由：</p>
<pre><code class="javascript">// main.js
// 这类似于以前在html中引入vue.js和vue-router.js，要注意顺序，先引入vue，再引入vue-router
import Vue from &#39;vue&#39;; // vue肯定是最先引入
import App from &#39;./App.vue&#39;;
import VueRouter from &#39;vue-router&#39;; // 先引入路由，后引入路由组件
import Home from &#39;./components/Home.vue&#39;;
import List from &#39;./components/List.vue&#39;;

Vue.use(VueRouter); // 和以前不一样的地方，引入router必须使用use.用来注册一些全局的内容，比如&lt;router-view&gt;

let router = new VueRouter({
    routes:[
        {path:&#39;/home&#39;,component:Home},
        {path:&#39;/list&#39;,component:List}
    ]
});

new Vue({
    router,
    el:&#39;#app&#39;,
    render:h=&gt;h(App)
})
</code></pre>
<p>最后，我们在App.vue中注册路由渲染：</p>
<pre><code class="vue">&lt;!--App.vue--&gt;
&lt;template&gt;
    &lt;div&gt;
        {{msg}}
        &lt;!--注册路由渲染--&gt;
        &lt;router-view&gt;&lt;/router-view&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
        data(){
            return {
                msg:&#39;hello&#39;
            }
        }
    }
&lt;/script&gt;
</code></pre>
<p>现在，我们的一个简单的路由项目就写好了。</p>
<h3 id="注意点："><a href="#注意点：" class="headerlink" title="注意点："></a>注意点：</h3><ul>
<li>引入vue-router后，要使用<code>Vue.use(VueRouter)</code>，用来注册全局内容</li>
<li>注意各个组件、库等之间按照依赖关系引入</li>
</ul>
<h3 id="感悟："><a href="#感悟：" class="headerlink" title="感悟："></a>感悟：</h3><p>在webpack环境中写项目和在平时的环境中写项目有一些不一样的地方。</p>
<ul>
<li>我们只需要在index.html文件中创建一个<code>&lt;div id=&#39;app&#39;&gt;&lt;/div&gt;</code>即可，也不需要引入任何js文件。因为有html-webpack-plugin帮我们做这些事情。</li>
<li>在vue项目中，我们创建了一个App.vue的组件。这个组件我认为就相当于html，我们的dom渲染都放在此处。最后整个的放入到html文件中，这样就不需要在html中进行操作了。</li>
<li>vue中的组件都可以独立存在，独立维护。所以，我们建立了一个总的组件之后，其他的小组件就按照功能或其他需要放在独立的文件夹中，通过模块引入的方式导入到main.js中。以前我们把组件都是写在同一个js文件下的，现在就不需要了。</li>
</ul>
<h2 id="2、将router独立出来"><a href="#2、将router独立出来" class="headerlink" title="2、将router独立出来"></a>2、将router独立出来</h2><p>我们上面的小例子里面还有一个小问题，在main.js中，我们引入了很多路由组件。这些东西和根实例没有多大关系，根实例上只是注册了router。</p>
<p>我们在现在的例子中，只是创建了两个路由组件，如果有上百个组件呢？就不好维护了。所以，我们把路由部分单独拿出来，放在router文件夹中（只拿router的js部分，组件位置不变）。</p>
<p>项目结构如下：</p>
<p><img src="https://raw.githubusercontent.com/Anilway/blogImg/master/2018-04/12/11-06.PNG" alt=""></p>
<p>然后我们把main.js中router部分抽出来，放在router文件夹下的index.js文件中：</p>
<pre><code class="javascript">import Vue from &#39;vue&#39;;
import VueRouter from &#39;vue-router&#39;;
import Home from &#39;../components/Home.vue&#39;;
import List from &#39;../components/List.vue&#39;;

Vue.use(VueRouter);

let router=new VueRouter({
    routes:[
        {path:&#39;/home&#39;,component:Home},
        {path:&#39;/list&#39;,component:List}
    ]
})

export default router;
</code></pre>
<p>要注意的是：</p>
<ul>
<li>因为现在是在一个独立的js文件中，所以，里面要重新引入vue；</li>
<li>组件的路径发生变化，要重新修改；</li>
<li>路由需要导出，在main.js中需要导入。</li>
</ul>
<p>在main.js中引入：</p>
<pre><code class="javascript">// main.js
import Vue from &#39;vue&#39;; // runtime不支持template,只支持render
import App from &#39;./App.vue&#39;;
import router from &#39;./router&#39;; // 因为我们的js文件叫index.js,所以会自动找到，当然你也可以写全。

new Vue({
    router,
    el:&#39;#app&#39;,
    render:h=&gt;h(App)
});
</code></pre>
<blockquote>
<p>补充说明：</p>
<p>到目前为止，我们都是引入的runtime，是不包含compiler的，其实我们也可以引入完整的vue：</p>
<pre><code class="javascript">import Vue from &#39;vue/dist/vue.js&#39;;
</code></pre>
<p>这样我们就可以使用完整的vue了，就可以在根实例上直接创建插件的模板：</p>
<pre><code class="javascript">let vm = new Vue({
    el:&#39;#app&#39;,
    components:{App},
    template:&#39;&lt;App/&gt;&#39;
    // render:h=&gt;h(App)
})
</code></pre>
<p>但是这样写很浪费，因为compiler占了6kb的大小。仅仅是为了写这样两句话，很少用的。所以，我们一般还是使用runtime部分。</p>
<p>拓展阅读：<a href="https://segmentfault.com/q/1010000008863503" target="_blank" rel="external">vue实例中<code>template: &#39;&lt;App/&gt;&#39;</code>,这样写是什么意思</a></p>
</blockquote>
<h2 id="3、编写一个简单的vue插件"><a href="#3、编写一个简单的vue插件" class="headerlink" title="3、编写一个简单的vue插件"></a>3、编写一个简单的vue插件</h2><p>在前面引入vue-router后，我们会使用<code>Vue.use(VueRouter)</code>来注册全局组件<code>&lt;router-view&gt;</code>和<code>&lt;router-link&gt;</code>。这里的use方法就是一个插件。</p>
<p>关于插件的开发，可以参看官网文档：<a href="https://cn.vuejs.org/v2/guide/plugins.html" target="_blank" rel="external">开发插件</a>。</p>
<p>现在我们自己来开发一个简单的插件。</p>
<h3 id="官方文档介绍"><a href="#官方文档介绍" class="headerlink" title="官方文档介绍"></a>官方文档介绍</h3><blockquote>
<h2 id="开发插件"><a href="#开发插件" class="headerlink" title="开发插件"></a><a href="https://cn.vuejs.org/v2/guide/plugins.html#%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6" target="_blank" rel="external">开发插件</a></h2><p>Vue 的插件必须提供一个公开方法 <code>install</code>，该方法会在你使用该插件，也就是 <code>Vue.use(yourPlugin)</code> 时被调用，==相当于是一个插件的注册或者声明==。这个方法的第一个参数是 <code>Vue</code> 构造器，第二个参数是一个可选的选项对象：</p>
<pre><code class="javascript">MyPlugin.install = function (Vue, options) {
  // 1. 添加全局方法或属性(Vue作为普通对象，给Vue添加属性方法)
  Vue.myGlobalMethod = function () {
    // 逻辑...
  }

  // 2. 添加全局资源
  Vue.directive(&#39;my-directive&#39;, {
    bind (el, binding, vnode, oldVnode) {
      // 逻辑...
    }
    ...
  })

  // 3. 注入组件
  Vue.mixin({
    created: function () {
      // 逻辑...
    }
    ...
  })

  // 4. 添加实例方法 （在Vue的原型上添加方法）
  Vue.prototype.$myMethod = function (methodOptions) {
    // 逻辑...
  }
}
</code></pre>
<h2 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a><a href="https://cn.vuejs.org/v2/guide/plugins.html#%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6" target="_blank" rel="external">使用插件</a></h2><p>通过全局方法 Vue.use() 使用插件：</p>
<pre><code class="javascript">// 调用 `MyPlugin.install(Vue)`
Vue.use(MyPlugin)
</code></pre>
<p>也可以传入一个选项对象：</p>
<pre><code class="javascript">Vue.use(MyPlugin, { someOption: true })
</code></pre>
<p><code>Vue.use</code> 会自动阻止多次注册相同插件，届时只会注册一次该插件。</p>
<p>Vue.js 官方提供的一些插件 (例如 <code>vue-router</code>) 在检测到 <code>Vue</code> 是可访问的全局变量时会自动调用 <code>Vue.use()</code>。然而在例如 CommonJS 的模块环境中，你应该始终显式地调用 <code>Vue.use()</code>：</p>
<pre><code class="javascript">// 用 Browserify 或 webpack 提供的 CommonJS 模块环境时
var Vue = require(&#39;vue&#39;)
var VueRouter = require(&#39;vue-router&#39;)

// 不要忘了调用此方法
Vue.use(VueRouter)
</code></pre>
<p><a href="https://github.com/vuejs/awesome-vue#components--libraries" target="_blank" rel="external">awesome-vue</a> 集合了来自社区贡献的数以千计的插件和库。</p>
</blockquote>
<p>我们首先在src文件夹中创建plugin文件夹，在里面建立notify.js和notify.vue。我们notify插件会调用notify组件。</p>
<p>项目结构如下：</p>
<p><img src="https://raw.githubusercontent.com/Anilway/blogImg/master/2018-04/12/11-07.PNG" alt=""></p>
<h3 id="基本代码模式"><a href="#基本代码模式" class="headerlink" title="基本代码模式"></a>基本代码模式</h3><p>现在我们来开始创建插件，在notify.js中开写：</p>
<p>基础脉络如下：</p>
<pre><code class="javascript">//notify.js
let notify={}; // 需要在此对象中拥有一个install方法
notify.install=function(Vue,options){// 第一个参数是Vue，第二个参数在使用时传入
    Vue.prototype.$notify=function(){

    };
};

// 导出这个包含install的对象，如果使用Vue.use就会调用这个install方法

export default notify;
</code></pre>
<blockquote>
<p>Vue 的插件必须提供一个公开方法 <code>install</code>，该方法会在你使用该插件，也就是 <code>Vue.use(yourPlugin)</code> 时被调用，相当于是一个插件的注册或者声明。</p>
</blockquote>
<p>然后在main.js中引入这个插件并使用：</p>
<pre><code class="javascript">// main.js
import Vue from &#39;vue&#39;;
import App from &#39;./App.vue&#39;;
import router from &#39;./router&#39;;
import notify from &#39;./plugin/notify.js&#39;; // 引入插件

Vue.use(notify,{a:123});// 使用带有install的插件,这里的第二个参数就是options的实参

new Vue({
    router,
    el:&#39;#app&#39;,
    render:h=&gt;h(App)
});
</code></pre>
<h3 id="插件组件编写"><a href="#插件组件编写" class="headerlink" title="插件组件编写"></a>插件组件编写</h3><p>现在，我们来编写notify.vue中的组件：</p>
<pre><code class="vue">&lt;template&gt;
    &lt;div class=&quot;notify&quot;&gt;您有一条未读消息！&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
        data() {
            return {}
        },
        methods: {},
        computed: {},
        components: {}
    }
&lt;/script&gt;


&lt;style scoped&gt;
    .notify{
        width: 400px;
        height: 40px;
        background:sandybrown;
        border-radius:8px;
        position:absolute;
        right:10px;
        bottom:10px;
        color:red;
        text-align:center;
    }
&lt;/style&gt;
</code></pre>
<p>notify.js</p>
<pre><code class="javascript">import modal from &#39;./notify.vue&#39;;

let notify={};// 需要在此对象中拥有一个install方法

// 我们调用的时候是：this.$notify(&#39;吃饭了吗？&#39;,{delay:1000})
notify.install=function(Vue,options={delay:3000}){
    Vue.prototype.$notify=function(message,opt={}){
        if(notify.el)return; // 判断页面上是否已经有了一个消息
        options={...options,...opt}; //用自己调用插件时传递过来的属性，覆盖掉默认设置好的
        let V=Vue.extend(modal);//返回的是一个构造函数的子类，参数是包含组件选项的对象，这里的model就是代码最开始引入的notify.vue中的组件
        let vm=new V;
        let oDiv=document.createElement(&#39;div&#39;);// 创建一个div，将实例挂在到元素上
        vm.$mount(oDiv);
        vm.value=message;
        document.body.appendChild(vm.$el);// 把当前实例这个真是对象扔到页面上
        notify.el=vm.$el;
        setTimeout(()=&gt;{ // 延迟多少秒，将dom元素移除掉
            document.body.removeChild(vm.$el); //将实例上的元素删除掉
            notify.el=null;
        },options.delay);
    }
};

// 导出这个包含install的对象，如果使用Vue.use就会调用这个install方法
export default notify;
</code></pre>
<h3 id="调用插件"><a href="#调用插件" class="headerlink" title="调用插件"></a>调用插件</h3><p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
    &lt;div&gt;
        &lt;button @click=show&gt;查看消息&lt;/button&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
        data(){
            return {
                msg:&#39;hello&#39;
            }
        },
        methods:{
            show(){
                this.$notify(&#39;还有未读消息哦！&#39;,{delay:2000});
            }
        }
    }
&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &#39;vue&#39;; // runtime不支持template,只支持render
import App from &#39;./App.vue&#39;;
import notify from &#39;./plugin/notify.js&#39;

Vue.use(notify,{delay:2000});// 使用带有install的插件

new Vue({
    router,
    el:&#39;#app&#39;,
    render:h=&gt;h(App)
});
</code></pre>
<h3 id="Vue-extend源代码"><a href="#Vue-extend源代码" class="headerlink" title="Vue.extend源代码"></a>Vue.extend源代码</h3><pre><code class="javascript">/**
   * Class inheritance
   */
  Vue.extend = function (extendOptions) {
    extendOptions = extendOptions || {};
    var Super = this;
    var SuperId = Super.cid;
    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});
    if (cachedCtors[SuperId]) {
      return cachedCtors[SuperId]
    }

    var name = extendOptions.name || Super.options.name;
    if (process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; name) {
      validateComponentName(name);
    }

    var Sub = function VueComponent (options) {
      this._init(options);
    };
    Sub.prototype = Object.create(Super.prototype);
    Sub.prototype.constructor = Sub;
    Sub.cid = cid++;
    Sub.options = mergeOptions(
      Super.options,
      extendOptions
    );
    Sub[&#39;super&#39;] = Super;

    // For props and computed properties, we define the proxy getters on
    // the Vue instances at extension time, on the extended prototype. This
    // avoids Object.defineProperty calls for each instance created.
    if (Sub.options.props) {
      initProps$1(Sub);
    }
    if (Sub.options.computed) {
      initComputed$1(Sub);
    }

    // allow further extension/mixin/plugin usage
    Sub.extend = Super.extend;
    Sub.mixin = Super.mixin;
    Sub.use = Super.use;

    // create asset registers, so extended classes
    // can have their private assets too.
    ASSET_TYPES.forEach(function (type) {
      Sub[type] = Super[type];
    });
    // enable recursive self-lookup
    if (name) {
      Sub.options.components[name] = Sub;
    }

    // keep a reference to the super options at extension time.
    // later at instantiation we can check if Super&#39;s options have
    // been updated.
    Sub.superOptions = Super.options;
    Sub.extendOptions = extendOptions;
    Sub.sealedOptions = extend({}, Sub.options);

    // cache constructor
    cachedCtors[SuperId] = Sub;
    return Sub
  };
</code></pre>
<p>参考阅读：<a href="https://www.w3cplus.com/vue/vue-extend.html" target="_blank" rel="external">Vue 2.0学习笔记：Vue.extend构造器的延伸</a></p>
<blockquote>
<p>2.x 版本文档</p>
<h3 id="Vue-extend-options"><a href="#Vue-extend-options" class="headerlink" title="Vue.extend( options )"></a><a href="https://cn.vuejs.org/v2/api/#Vue-extend" target="_blank" rel="external">Vue.extend( options )</a></h3><ul>
<li><p><strong>参数</strong>：</p>
<ul>
<li><code>{Object} options</code></li>
</ul>
</li>
<li><p><strong>用法</strong>：</p>
<p>使用基础 Vue 构造器，创建一个“子类”。参数是一个包含组件选项的对象。</p>
<p><code>data</code> 选项是特例，需要注意 - 在 <code>Vue.extend()</code> 中它必须是函数</p>
<pre><code class="html">&lt;div id=&quot;mount-point&quot;&gt;&lt;/div&gt;
</code></pre>
<pre><code class="js">// 创建构造器
var Profile = Vue.extend({
  template: &#39;&lt;p&gt;{{firstName}} {{lastName}} aka {{alias}}&lt;/p&gt;&#39;,
  data: function () {
    return {
      firstName: &#39;Walter&#39;,
      lastName: &#39;White&#39;,
      alias: &#39;Heisenberg&#39;
    }
  }
})
// 创建 Profile 实例，并挂载到一个元素上。
new Profile().$mount(&#39;#mount-point&#39;)
</code></pre>
<p>结果如下：</p>
<pre><code class="html">&lt;p&gt;Walter White aka Heisenberg&lt;/p&gt;
</code></pre>
</li>
<li><p><strong>参考</strong>：<a href="https://cn.vuejs.org/v2/guide/components.html" target="_blank" rel="external">组件</a></p>
</li>
</ul>
<p>老版本vue文档里面涉及的对Vue.extend的描述</p>
<h2 id="使用组件"><a href="#使用组件" class="headerlink" title="使用组件"></a><a href="https://012-cn.vuejs.org/guide/components.html" target="_blank" rel="external">使用组件</a></h2><p>在 Vue.js 中，我们可以用 Vue 扩展出来的 ViewModel 子类当做可复用的组件。这在概念上与 <a href="http://www.w3.org/TR/components-intro/" target="_blank" rel="external">Web Components</a> 非常相似，不同之处在于 Vue 的组件无需任何 polyfill。要创建一个组件，只需调用 <code>Vue.extend()</code> 来生成一个 Vue 的子类构造函数：</p>
<pre><code class="js">// 扩展 Vue 得到一个可复用的构造函数
var MyComponent = Vue.extend({
  template: &#39;&lt;p&gt;A custom component!&lt;/p&gt;&#39;
})
</code></pre>
<p>Vue 的构造函数可接收的大部分选项都能在 <code>Vue.extend()</code> 中使用，不过也有两个特例：<code>data</code> 和 <code>el</code>。由于每个 Vue 的实例都应该有自己的 <code>$data</code> 和 <code>$el</code>，我们显然不希望传递给 <code>Vue.extend()</code> 的值被所有通过这个构造函数创建的实例所共享。因此如果要定义组件初始化默认数据和元素的方式，应该传入一个函数：</p>
<pre><code class="js">var ComponentWithDefaultData = Vue.extend({
  data: function () {
    return {
      title: &#39;Hello!&#39;
    }
  }
})
</code></pre>
<p>接下来，就可以用 <code>Vue.component()</code> 来<strong>注册</strong>这个构造函数了：</p>
<pre><code class="js">// 把构造函数注册到 my-component 这个 id
Vue.component(&#39;my-component&#39;, MyComponent)
</code></pre>
<p>为了更简单，也可以直接传入 option 对象来代替构造函数。如果接收到的是一个对象，<code>Vue.component()</code> 会为你隐式调用 <code>Vue.extend()</code>：</p>
<pre><code class="js">// 注意：该方法返回全局 Vue 对象，
// 而非注册的构造函数
Vue.component(&#39;my-component&#39;, {
  template: &#39;&lt;p&gt;A custom component!&lt;/p&gt;&#39;
})
</code></pre>
<p>之后就能在父级实例的模板中使用注册过的组件了 (务必在初始化根实例<strong>之前</strong>注册组件) ：</p>
<pre><code class="html">&lt;!-- 父级模板 --&gt;
&lt;my-component&gt;&lt;/my-component&gt;
</code></pre>
<p>渲染结果：</p>
<pre><code class="html">&lt;p&gt;A custom component!&lt;/p&gt;
</code></pre>
<p>你没有必要，也不应该全局注册所有组件。你可以限制一个组件仅对另一个组件及其后代可用，只要在另一个组件的 <code>components</code> 选项中传入这个组件即可 (这种封装形式同样适用于其他资源，例如指令和过滤器) ：</p>
<pre><code class="js">var Parent = Vue.extend({
  components: {
    child: {
      // child 只能被
      // Parent 及其后代组件使用
    }
  }
})
</code></pre>
<p>==理解 <code>Vue.extend()</code> 和 <code>Vue.component()</code> 的区别非常重要。==由于 <code>Vue</code> 本身是一个构造函数， <code>Vue.extend()</code> 是一个<strong>类继承方法</strong>。它用来创建一个 <code>Vue</code> 的子类并返回其构造函数。而另一方面，<code>Vue.component()</code> 是一个类似 <code>Vue.directive()</code> 和 <code>Vue.filter()</code>的<strong>资源注册方法</strong>。它作用是建立指定的构造函数与 ID 字符串间的关系，从而让 Vue.js 能在模板中使用它。直接向 <code>Vue.component()</code> 传递 options 时，它会在内部调用 <code>Vue.extend()</code>。</p>
<p>Vue.js 支持两种不同风格的调用组件的 API：过程式的基于构造函数的 API，以及基于模板的声明式的 Web Components 风格 API。如果你感到困惑，想一下通过 <code>new Image()</code> 和通过 <code>&lt;img&gt;</code> 标签这两种创建图片元素的方式。它们都在各自的适用场景下发挥着作用，为了尽可能灵活，Vue.js 同时提供这两种方式。</p>
<p><code>table</code> 元素对能出现在其内部的元素类型有限制，因此自定义元素会被提到外部而且无法正常渲染。在那种情况下你可以使用指令式组件语法： <code>&lt;tr v-component=&quot;my-component&quot;&gt;&lt;/tr&gt;</code>。</p>
</blockquote>
<h2 id="4、Vue-js-插件开发详解"><a href="#4、Vue-js-插件开发详解" class="headerlink" title="4、Vue.js 插件开发详解"></a>4、<a href="https://juejin.im/post/58d9aae02f301e007e8ee278" target="_blank" rel="external">Vue.js 插件开发详解</a></h2><blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>随着 Vue.js 越来越火，Vue.js 的相关插件也在不断的被贡献出来，数不胜数。比如官方推荐的 vue-router、vuex 等，都是非常优秀的插件。但是我们更多的人还只停留在使用的阶段，比较少自己开发。所以接下来会通过一个简单的 vue-toast 插件，来了解掌握插件的开发和使用。</p>
<h2 id="认识插件"><a href="#认识插件" class="headerlink" title="认识插件"></a>认识插件</h2><p>想要开发插件，先要认识一个插件是什么样子的。</p>
<p>Vue.js 的插件应当有一个公开方法 install 。这个方法的第一个参数是 Vue 构造器 , 第二个参数是一个可选的选项对象:</p>
<pre><code class="js">MyPlugin.install = function (Vue, options) {
  Vue.myGlobalMethod = function () {  // 1. 添加全局方法或属性，如: vue-custom-element
    // 逻辑...
  }
  Vue.directive(&#39;my-directive&#39;, {  // 2. 添加全局资源：指令/过滤器/过渡等，如 vue-touch
    bind (el, binding, vnode, oldVnode) {
      // 逻辑...
    }
    ...
  })
  Vue.mixin({
    created: function () {  // 3. 通过全局 mixin方法添加一些组件选项，如: vuex
      // 逻辑...
    }
    ...
  })
  Vue.prototype.$myMethod = function (options) {  // 4. 添加实例方法，通过把它们添加到 Vue.prototype 上实现
    // 逻辑...
  }
}
</code></pre>
<p>接下来要讲到的 vue-toast 插件则是通过添加实例方法实现的。我们先来看个小例子。先新建个js文件来编写插件：toast.js</p>
<pre><code class="js">// toast.js
var Toast = {};
Toast.install = function (Vue, options) {
    Vue.prototype.$msg = &#39;Hello World&#39;;
}
module.exports = Toast;
</code></pre>
<p>在 main.js 中，需要导入 toast.js 并且通过全局方法 Vue.use() 来使用插件：</p>
<pre><code class="js">// main.js
import Vue from &#39;vue&#39;;
import Toast from &#39;./toast.js&#39;;
Vue.use(Toast);
</code></pre>
<p>然后，我们在组件中来获取该插件定义的 $msg 属性。</p>
<pre><code class="js">// App.vue
export default {
    mounted(){
        console.log(this.$msg);         // Hello World
    }
}
</code></pre>
<p>可以看到，控制台成功的打印出了 Hello World 。既然 $msg 能获取到，那么我们就可以来实现我们的 vue-toast 插件了。</p>
<h2 id="开发-vue-toast"><a href="#开发-vue-toast" class="headerlink" title="开发 vue-toast"></a>开发 vue-toast</h2><p>需求：在组件中通过调用<code>this.$toast(&#39;网络请求失败&#39;)</code>来弹出提示，默认在底部显示。可以通过调用 <code>this.$toast.top()</code>或 <code>this.$toast.center()</code>等方法来实现在不同位置显示。</p>
<p>整理一下思路，弹出提示的时候，我可以在 body 中添加一个 div 用来显示提示信息，不同的位置我通过添加不同的类名来定位，那就可以开始写了。</p>
<pre><code class="js">// toast.js
var Toast = {};
Toast.install = function (Vue, options) {
    Vue.prototype.$toast = (tips) =&gt; {
        let toastTpl = Vue.extend({     // 1、创建构造器，定义好提示信息的模板
            template: &#39;&lt;div class=&quot;vue-toast&quot;&gt;&#39; + tips + &#39;&lt;/div&gt;&#39;
        });
        let tpl = new toastTpl().$mount().$el;  // 2、创建实例，挂载到文档以后的地方
        document.body.appendChild(tpl);     // 3、把创建的实例添加到body中
        setTimeout(function () {        // 4、延迟2.5秒后移除该提示
            document.body.removeChild(tpl);
        }, 2500)
    }
}
module.exports = Toast;
</code></pre>
<p>好像很简单，我们就实现了<code>this.$toast()</code>，接下来显示不同位置。</p>
<pre><code class="js">// toast.js
[&#39;bottom&#39;, &#39;center&#39;, &#39;top&#39;].forEach(type =&gt; {
    Vue.prototype.$toast[type] = (tips) =&gt; {
        return Vue.prototype.$toast(tips,type)
    }
})
</code></pre>
<p>这里把 type 传给 <code>$toast</code>在该方法里进行不同位置的处理，上面说了通过添加不同的类名(toast-bottom、toast-top、toast-center)来实现，那 <code>$toast</code>方法需要小小修改一下。</p>
<pre><code class="js">Vue.prototype.$toast = (tips,type) =&gt; {     // 添加 type 参数
    let toastTpl = Vue.extend({             // 模板添加位置类
        template: &#39;&lt;div class=&quot;vue-toast toast-&#39;+ type +&#39;&quot;&gt;&#39; + tips + &#39;&lt;/div&gt;&#39;
    });
    ...
}
</code></pre>
<p>好像差不多了。但是如果我想默认在顶部显示，我每次都要调用<code>this.$toast.top()</code>好像就有点多余了，我能不能 <code>this.$toast()</code>就直接在我想要的地方呢？还有我不想要 2.5s 后才消失呢？这时候注意到 <code>Toast.install(Vue,options)</code>里的<code>options</code>参数，我们可以在<code>Vue.use()</code>通过<code>options</code>传进我们想要的参数。最后修改插件如下：</p>
<pre><code class="js">var Toast = {};
Toast.install = function (Vue, options) {
    let opt = {
        defaultType:&#39;bottom&#39;,   // 默认显示位置
        duration:&#39;2500&#39;         // 持续时间
    }
    for(let property in options){
        opt[property] = options[property];  // 使用 options 的配置
    }
    Vue.prototype.$toast = (tips,type) =&gt; {
        if(type){
            opt.defaultType = type;         // 如果有传type，位置则设为该type
        }
        if(document.getElementsByClassName(&#39;vue-toast&#39;).length){
            // 如果toast还在，则不再执行
            return;
        }
        let toastTpl = Vue.extend({
            template: &#39;&lt;div class=&quot;vue-toast toast-&#39;+opt.defaultType+&#39;&quot;&gt;&#39; + tips + &#39;&lt;/div&gt;&#39;
        });
        let tpl = new toastTpl().$mount().$el;
        document.body.appendChild(tpl);
        setTimeout(function () {
            document.body.removeChild(tpl);
        }, opt.duration)
    }
    [&#39;bottom&#39;, &#39;center&#39;, &#39;top&#39;].forEach(type =&gt; {
        Vue.prototype.$toast[type] = (tips) =&gt; {
            return Vue.prototype.$toast(tips,type)
        }
    })
}
module.exports = Toast;
</code></pre>
<p>这样子一个简单的 vue 插件就实现了，并且可以通过 npm 打包发布，下次就可以使用 npm install 来安装了。</p>
<h3 id="源码地址：vue-toast"><a href="#源码地址：vue-toast" class="headerlink" title="源码地址：vue-toast"></a>源码地址：<a href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Flin-xin%2Fvue-toast" target="_blank" rel="external">vue-toast</a></h3><h3 id="更多文章：blog"><a href="#更多文章：blog" class="headerlink" title="更多文章：blog"></a>更多文章：<a href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Flin-xin%2Fblog" target="_blank" rel="external">blog</a></h3></blockquote>
<h2 id="5、Vue插件开发入门"><a href="#5、Vue插件开发入门" class="headerlink" title="5、Vue插件开发入门"></a>5、<a href="https://www.cnblogs.com/libin-1/p/6254390.html" target="_blank" rel="external">Vue插件开发入门</a></h2><blockquote>
<p>相对组件来说，Vue 的插件开发受到的关注要少一点。但是插件的功能是十分强大的，能够完成许多 Vue 框架本身不具备的功能。</p>
<p>大家一般习惯直接调用现成的插件，比如官方推荐的 vue-router、vue-touch 等。</p>
<p>下面就看一下 Vue 的插件开发如何入门。</p>
<p>首先我们简单回顾一下 Vue.js 官方文档中对于插件开发的描述。</p>
<p>Vue 的插件必须提供一个公开方法 <code>install</code>，该方法会在你使用该插件，也就是 <code>Vue.use(yourPlugin)</code> 时被调用，相当于是一个插件的注册或者声明。<code>install</code> 接受 Vue 构造器作为第一个参数，并且有一个可选的选项对象作为第二个参数，比如：</p>
<pre><code class="js">yourPlugin.install = function (Vue, options) {
  // 1. 添加全局方法或属性
  Vue.myGlobalMethod = ...
  // 2. 添加全局资源
  Vue.directive(&#39;my-directive&#39;, {})
  // 3. 添加实例方法
  Vue.prototype.$myMethod = ...
}
</code></pre>
<p>插件在使用时有两种方式：</p>
<blockquote>
<p>第一种是如上述提到的，可以通过 <code>Vue.use(yourPlugin)</code> 全局方法进行调用。<br>进行 Vue 的大型项目开发时，如果用 <code>vue-cli</code> 生成项目目录结构，<code>Vue.use()</code> 方法一般在 main.js 中调用。</p>
<p>第二种实际上是插件本身帮你完成了 <code>Vue.use()</code>的调用。<br>这种情况下，插件会去检测是否存在 Vue 全局变量，如果存在，就自动调用 <code>Vue.use()</code>。所以，如果你的项目中是使用 script 方式引入的 Vue.js（这种情况下 Vue 才会作为一个全局变量存在），在使用比如 <code>vue-router</code> 之类的插件时就可以直接引入然后使用，不用再调用 <code>Vue.use()</code>。<br>但是，在模块环境下应当始终显式调用该方法，以保证插件可以正常使用：</p>
</blockquote>
<pre><code class="js">// 通过 Browserify 或 Webpack 使用 CommonJS 兼容模块
var Vue = require(&#39;vue&#39;)
var VueRouter = require(&#39;vue-router&#39;)
// 不要忘了调用此方法
Vue.use(VueRouter)
// 或者可以多传入一个选项对象
// Vue.use(VueRouter, { hashbang: true })
</code></pre>
<p>接下来我们看一下一些官方的常用插件的实现，我们配合去除具体逻辑的源码进行一些解读：</p>
<h3 id="1、vue-touch"><a href="#1、vue-touch" class="headerlink" title="1、vue-touch"></a>1、vue-touch</h3><pre><code class="js">// version: 1.1.0
// vue-touch.js
var vueTouch = {}
// 暴露出的全局配置项，也就是在调用 Vue.use(Vue, options) 时传入的第二个选项参数
vueTouch.config = {}
// 核心部分，插件的具体逻辑均在此实现
vueTouch.install = function (Vue) {
  Vue.directive(&#39;touch&#39;, {
    bind: function () {
    },
    update: function () {
    },
    unbind: function () {
    }
  })
}
// 支持 CommonJS
if (typeof exports == &quot;object&quot;) {
  module.exports = vueTouch
// 支持 AMD
} else if (typeof define == &quot;function&quot; &amp;&amp; define.amd) {
  define([], function(){ return vueTouch })
// Vue 是全局变量时，自动调用 Vue.use()
} else if (window.Vue) {
  window.VueTouch = vueTouch
  Vue.use(vueTouch)
}
</code></pre>
<h3 id="2、vue-router"><a href="#2、vue-router" class="headerlink" title="2、vue-router"></a>2、vue-router</h3><pre><code class="js">// version: 0.7.13
// src/index.js
let Vue
// 封装为 ES6 class
class Router {
  // 可传入全局配置项
  constructor({
    hashbang = true,
    abstract = false,
    history = false,
    saveScrollPosition = false,
    transitionOnLoad = false,
    suppressTransitionError = false,
    root = null,
    linkActiveClass = &#39;v-link-active&#39;
  } = {}) {
    // ...
  }
}
// 避免重复 install，设立 flag
Router.installed = false
Router.install = function (externalVue) {
  if (Route.installed) {
    return
  }
  Vue = externalVue
  // install 的具体逻辑，此处省略
  // ...

  // install 完毕
  Router.installed = true
}
// 同样，Vue 作为全局变量时自动 install
if (typeof window !== &#39;undefined&#39; &amp;&amp; window.Vue) {
  window.Vue.use(Router)
}
export default Router
</code></pre>
<h3 id="3、vue-resource"><a href="#3、vue-resource" class="headerlink" title="3、vue-resource"></a>3、vue-resource</h3><pre><code class="js">// version: 1.0.3
// src/index.js
// install 方法
function plugin(Vue) {
  if (plugin.installed) {
    return;
  }

  // 插件核心逻辑，此处省略
  // ...
}
// 同上，Vue 是全局变量时，自动 install
if (typeof window !== &#39;undefined&#39; &amp;&amp; window.Vue) {
    window.Vue.use(plugin);
}
export default plugin;
</code></pre>
<p>看完以上三个官方例子，相信各位已经对 Vue 的插件开发过程有了一定的了解，大家就可以根据自己的需要为 Vue 增加各种全局功能了。</p>
</blockquote>
<h2 id="6、vue插件开发与发布"><a href="#6、vue插件开发与发布" class="headerlink" title="6、vue插件开发与发布"></a>6、<a href="https://www.jianshu.com/p/d6855556cd75" target="_blank" rel="external">vue插件开发与发布</a></h2><p>点击标题转跳查看原文。</p>
<h2 id="7、vue插件编写的个人理解"><a href="#7、vue插件编写的个人理解" class="headerlink" title="7、vue插件编写的个人理解"></a>7、vue插件编写的个人理解</h2><p>在看了视频教程讲解，以及上面的插件开发介绍文章后，我对vue插件的编写有了一点儿感悟。</p>
<p>我认为对于vue插件的开发，就是对vue的扩展，扩展vue的功能。我们先来看一个关于面向对象的例子：</p>
<pre><code class="javascript">function MyVue(){...}
let vm=new MyVue();
</code></pre>
<p>假设我写了一个MyVue的库，这个MyVue实际就是一个构造函数，我们在使用的时候就是创建MyVue的实例。现在我希望扩展MyVue的功能。使得使用MyVue的时候更方便，要怎么做呢？</p>
<p>我想的话，扩展MyVue的功能，一般是添加一个方法。而且这个方法应该可以让所有的实例使用。那么，我们至少可以想到两种：</p>
<ul>
<li>添加全局方法，也就是将MyVue看做普通对象，我们给MyVue添加方法。</li>
<li>添加原型方法，我们可以在MyVue的原型上添加方法，这样，所有的实例都可以使用了。</li>
</ul>
<p>比如：给MyVue扩展功能<code>say()</code></p>
<pre><code class="javascript">function MyVue(){...}
// 添加全局方法
MyVue.say=function(){alert(&quot;hi&quot;)};
// 添加原型方法（实例方法）
MyVue.prototype.say=function(){alert(&quot;hi&quot;)};
</code></pre>
<p>那么，如果是全局方法，我们可以这样调用：</p>
<pre><code class="javascript">// MyVue.say=function(){alert(&quot;hi&quot;)};
let vm=new MyVue();
// 直接调用
MyVue.say();
// 放在一个函数中使用
vm.wantSay(){
    MyVue.say();
};
vm.wantSay();
</code></pre>
<p>如果是原型方法，直接使用即可：</p>
<pre><code class="javascript">// MyVue.prototype.say=function(){alert(&quot;hi&quot;)}; 
let vm=new MyVue();
vm.say();
</code></pre>
<p>所以，我理解的编写插件，就是给一个类扩展方法，并且能让这个方法在任何实例中使用。既然是一个方法，那么插件的核心还是一团JS代码。</p>
<p>不同的库，添加插件的方式不一样。你当然可以简单粗暴的在直接给库添加全局方法或者在原型上添加方法，但是这样做可能和库的使用不融洽，粘合性不高，这是由库、框架的特性决定的。所以，库的作者会专门留下一些插件接口，来接收插件扩展。比如，我自己写的轮播图组件，就是留了一个extend接口去扩展方法。jQuery也是有一个extend接口去添加插件。</p>
<h3 id="插件接收方式"><a href="#插件接收方式" class="headerlink" title="插件接收方式"></a>插件接收方式</h3><p>vue接收插件的方式和jQuery就很不一样了。操作起来会多一点东西，但核心原理还是一样的，将插件扩展在原型上或者Vue全局上。扩展方式除了<code>Vue.xxx</code>和<code>Vue.prototype.$xxx</code>之外，还可以通过<code>Vue.directive</code>添加全局资源和<code>Vue.mixin</code>注入。</p>
<p>比如：扩展一个<code>$say</code>方法</p>
<pre><code class="javascript">Vue.prototype.$say=function(){alert(&#39;hi&#39;)};
</code></pre>
<p>但是vue的插件并不是这样直接添加的。</p>
<h3 id="插件需要注册"><a href="#插件需要注册" class="headerlink" title="插件需要注册"></a>插件需要注册</h3><p>我们在编写vue的插件的时候，实际上是在写一个插件对象，并不是单纯的写一个方法扩展到全局或者原型上就完事了。这个插件是需要注册的。我们需要给这个插件对象添加一个install方法，这个install方法就是注册插件用的。我们通过<code>Vue.use(xxPlugin)</code>来自动调用install方法注册插件。</p>
<p>比如：</p>
<pre><code class="javascript">// myPlugin.js
let myPlugin={}; // 创建一个插件对象
myPlugin.install=function(Vue,options){ // 给插件对象添加install方法
    Vue.prototype.$say=function(){ // 在install内部编写插件代码
        alert(&#39;hi&#39;);
    };
}

// 导出插件
// 因为我们在实际编写插件的时候，是在独立的js文件中编写的，一般不会写在主js文件上，所以需要导出
export default myPlugin;
</code></pre>
<p>接着在主js文件中引入插件，并使用：</p>
<pre><code class="js">// main.js
import Vue from &#39;vue&#39;;
import myPlugin from &#39;./plugins/myPlugin.js&#39;;
Vue.use(myPlugin,options);
</code></pre>
<p>现在就有意思了，<code>Vue.use</code>执行时会自动调用插件对象的install方法，并把参数对象options传给install方法。我们可以猜测一下<code>Vue.use</code>内部实现过程：</p>
<pre><code class="javascript">Vue.use=function(plugin,options){
    ...
    plugin.install(this,options);
    ...
};
</code></pre>
<h3 id="插件的参数"><a href="#插件的参数" class="headerlink" title="插件的参数"></a>插件的参数</h3><blockquote>
<h3 id="Vue-use-plugin"><a href="#Vue-use-plugin" class="headerlink" title="Vue.use( plugin )"></a><a href="https://cn.vuejs.org/v2/api/#Vue-use" target="_blank" rel="external">Vue.use( plugin )</a></h3><ul>
<li><p><strong>参数</strong>：</p>
<ul>
<li><code>{Object | Function} plugin</code></li>
</ul>
</li>
<li><p><strong>用法</strong>：</p>
<p>安装 Vue.js 插件。如果插件是一个对象，必须提供 <code>install</code> 方法。如果插件是一个函数，它会被作为 install 方法。install 方法调用时，会将 Vue 作为参数传入。</p>
<p>该方法需要在调用 <code>new Vue()</code> 之前被调用。</p>
<p>当 install 方法被同一个插件多次调用，插件将只会被安装一次。</p>
</li>
<li><p><strong>参考</strong>：<a href="https://cn.vuejs.org/v2/guide/plugins.html" target="_blank" rel="external">插件</a></p>
</li>
</ul>
<p>源码：</p>
<pre><code class="js">function initUse (Vue) {
  Vue.use = function (plugin) {
    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));
    if (installedPlugins.indexOf(plugin) &gt; -1) { // 不重复注册插件
      return this
    }

    // additional parameters
    var args = toArray(arguments, 1); // 将use放的arguments转为数组，并去除第一个参数
    args.unshift(this); // 将this，也就是Vue添加到args的头部
    if (typeof plugin.install === &#39;function&#39;) {
      plugin.install.apply(plugin, args);
    } else if (typeof plugin === &#39;function&#39;) {
      plugin.apply(null, args);
    }
    installedPlugins.push(plugin);
    return this
  };
}
</code></pre>
</blockquote>
<p>在源码中我们可以看到，对传入的参数做了处理。<code>Vue.use</code>会将参数传给<code>install</code>方法。</p>
<p>比如在注册插件时，我们在后面传入了a/s/d/f参数：</p>
<pre><code class="js">Vue.use(myPlugin,a,s,d,f);
</code></pre>
<p><code>Vue.use</code>会将<code>[Vue,a,s,d,f]</code>通过apply的方式传给install。所以，我们在install中会这样使用：</p>
<pre><code class="js">myPlugin.install=function(Vue,options){ // Vue就是传入的第一个参数Vue，options就是传入的第二个参数a;s、d、f也传进来了，不过这里没有写形参接收，根据需要接收。我们接收的这些参数，就可以传给install里面真是的插件方法中了。
    ...
}
</code></pre>
<p>那么，我们在使用插件的时候，至少有两种方式接收插件参数：</p>
<ul>
<li>注册插件时将参数传给插件，比如：<code>Vue.use(plugin,xxx,xxx)</code>。</li>
<li>使用插件时将参数传给插件，比如：<code>this.$say(xxx,xxx)</code>。</li>
</ul>
<p>现在，我们可以把上面<code>$say</code>稍微修改一下，好接收参数：</p>
<pre><code class="javascript">let myPlugin={};
myPlugin.install=function(Vue,options={msg:&#39;你好&#39;,name:&#39;客官&#39;}){
    Vue.prototype.$say=function(opt){
        for(key in opt){
            if(opt.hasOwnProperty(key)){
                options[key]=pot[key];
            }
        }
        // 也可以用ES6中的解构赋值方法 options={...options,...opt},更简练
        alert(options.msg+&quot;!&quot;+options.name);
    }
}
</code></pre>
<p>这样，<code>$say</code>方法可以通过<code>Vue.use</code>传入参数，也可以通过直接使用<code>this.$say()</code>传入参数，而且，我在这里设定的是，使用<code>this.$say()</code>传入的参数会覆盖<code>Vue.use</code>传入的参数。</p>
<h3 id="实际编写插件"><a href="#实际编写插件" class="headerlink" title="实际编写插件"></a>实际编写插件</h3><p>我们在实际编写插件的时候，这个插件不一定是例子中的那种纯粹的方法，还有可能是一个封装好的功能组件。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #222;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load"> 
    <button class="disqus_click_btn" style="display: none">阅读评论（请确保 disqus 可以正常加载）</button>
</div>

<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2018/04/12/2018-04-12dev-vue-plugin/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/ls-javascript" id="disqus-lazy-load-script">
    $.ajax({
        url: 'https://disqus.com/next/config.json',
        timeout: 4000,
        type: 'GET',
        success: (function() {
            var d = document;
            var s = d.createElement('script');
            s.src = '//anilway.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
            $('.btn_click_load').css('display','none');
        })(),
        error: function() {
          $('.btn_click_load').css('display','block');
        }
    });
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//anilway.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
  	

</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018/04/17/2018-04-17vuex-introduce/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2018/04/06/2018-04-06webpack-config/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header1.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/touxiang.jpg" alt="Anilway's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        更多
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: hanway.robot@foxmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
                <li>
                    <a href="https://anilway.gitbooks.io/-javascript/content/" target="_blank" title="电子书">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">book</i>
                        
                        电子书
                    </a>
                </li>
            
                <li>
                    <a href="https://anilway.gitbooks.io/-javascript/content/" target="_blank" title="网址导航">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">tab</i>
                        
                        网址导航
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/11/">十一月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/10/">十月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">一月 2018<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">17</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/11/">十一月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/JS基础入门/">JS基础入门<span class="sidebar_archives-count">20</span></a></li><li><a class="sidebar_archives-link" href="/categories/JS框架库/">JS框架库<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/JS进阶/">JS进阶<span class="sidebar_archives-count">13</span></a></li><li><a class="sidebar_archives-link" href="/categories/其他/">其他<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/后端入门/">后端入门<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/小技巧/">小技巧<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/旁征博引/">旁征博引<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/编程工具/">编程工具<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about/index.html" title="关于我">
                
                关于我
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                时间轴
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签云">
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友链接">
                
                友链接
            </a>
        </li>
        
    
        <li>
            <a href="/gallery" title="图片集">
                
                图片集
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/Anilway" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2016&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Anilway
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?wgjW/HuQG9JDgvPDPoRAng==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   <!-- 使用 DISQUS js 代码 -->






<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
